{
  "partitionUuid": "938e16fe-a216-4fe1-92bd-dcab49646fb9",
  "pipelines": [
    {
      "name": "Jira",
      "processes": [
        {
          "name": "Jira",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        },
        {
          "name": "CreateTicket",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        },
        {
          "name": "JiraAnnotate",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        }
      ],
      "enableTracing": false,
      "enableMetrics": false
    },
    {
      "name": "GitHub",
      "processes": [
        {
          "name": "Github",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        },
        {
          "name": "CreateCommit",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        },
        {
          "name": "GithubAnnotate",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        }
      ],
      "enableTracing": false,
      "enableMetrics": false
    },
    {
      "name": "CircleCI",
      "processes": [
        {
          "name": "CircleCI",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        },
        {
          "name": "CreateCICD",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        },
        {
          "name": "CircleCIAnnotator",
          "retryStrategy": {
            "numRetries": 0,
            "initialBackOffMs": 0
          },
          "instrumentation": {
            "enableTracing": false,
            "latency": false,
            "counter": false
          }
        }
      ],
      "enableTracing": false,
      "enableMetrics": false
    }
  ],
  "externalSystems": [],
  "processDefinitions": [
    {
      "transformer": {
        "name": "Github",
        "specs": [
          {
            "sourceField": "head_commit.id",
            "targetField": "digest",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "exists": {
                  "ops": [
                    {
                      "key": "repository",
                      "op": "Exists"
                    }
                  ]
                }
              }
            }
          },
          {
            "sourceField": "head_commit.author.username",
            "targetField": "author",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "exists": {
                  "ops": [
                    {
                      "key": "repository",
                      "op": "Exists"
                    }
                  ]
                }
              }
            }
          },
          {
            "sourceField": "head_commit.message",
            "targetField": "message",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "exists": {
                  "ops": [
                    {
                      "key": "repository",
                      "op": "Exists"
                    }
                  ]
                }
              }
            }
          }
        ]
      }
    },
    {
      "spawner": {
        "name": "CreateCICD",
        "condition": {
          "exists": {
            "ops": [
              {
                "key": "build_num",
                "op": "Exists"
              }
            ]
          }
        },
        "delayInMs": 0,
        "doSync": true,
        "job": {
          "runnable": {
            "pathToExec": "/Users/kmgreen/Project/go/src/github.com/kmgreen2/agglo/bin/activitytracker",
            "cmdArgs": [
              "-commandType CreateCICD"
            ]
          }
        }
      }
    },
    {
      "annotator": {
        "name": "CircleCIAnnotator",
        "annotations": [
          {
            "fieldKey": "integrationType",
            "value": "circleci",
            "condition": {
              "exists": {
                "ops": [
                  {
                    "key": "build_num",
                    "op": "Exists"
                  }
                ]
              }
            }
          }
        ]
      }
    },
    {
      "spawner": {
        "name": "CreateTicket",
        "condition": {
          "expression": {
            "comparator": {
              "lhs": {
                "variable": {
                  "name": "webhookEvent"
                }
              },
              "rhs": {
                "literal": "jira:issue_created"
              },
              "op": "Equal"
            }
          }
        },
        "delayInMs": 0,
        "doSync": true,
        "job": {
          "runnable": {
            "pathToExec": "/Users/kmgreen/Project/go/src/github.com/kmgreen2/agglo/bin/activitytracker",
            "cmdArgs": [
              "-commandType CreateTicket"
            ]
          }
        }
      }
    },
    {
      "transformer": {
        "name": "Jira",
        "specs": [
          {
            "sourceField": "status.name",
            "targetField": "state",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "expression": {
                  "comparator": {
                    "lhs": {
                      "variable": {
                        "name": "webhookEvent"
                      }
                    },
                    "rhs": {
                      "literal": "jira:.*"
                    },
                    "op": "RegexMatch"
                  }
                }
              }
            }
          },
          {
            "sourceField": "assignee.accountId",
            "targetField": "assignee",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "expression": {
                  "comparator": {
                    "lhs": {
                      "variable": {
                        "name": "webhookEvent"
                      }
                    },
                    "rhs": {
                      "literal": "jira:.*"
                    },
                    "op": "RegexMatch"
                  }
                }
              }
            }
          },
          {
            "sourceField": "creator.accountId",
            "targetField": "creator",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "expression": {
                  "comparator": {
                    "lhs": {
                      "variable": {
                        "name": "webhookEvent"
                      }
                    },
                    "rhs": {
                      "literal": "jira:.*"
                    },
                    "op": "RegexMatch"
                  }
                }
              }
            }
          },
          {
            "sourceField": "issue.summary",
            "targetField": "title",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "expression": {
                  "comparator": {
                    "lhs": {
                      "variable": {
                        "name": "webhookEvent"
                      }
                    },
                    "rhs": {
                      "literal": "jira:.*"
                    },
                    "op": "RegexMatch"
                  }
                }
              }
            }
          }
        ]
      }
    },
    {
      "annotator": {
        "name": "GithubAnnotate",
        "annotations": [
          {
            "fieldKey": "integrationType",
            "value": "github",
            "condition": {
              "exists": {
                "ops": [
                  {
                    "key": "repository",
                    "op": "Exists"
                  }
                ]
              }
            }
          }
        ]
      }
    },
    {
      "spawner": {
        "name": "CreateCommit",
        "condition": {
          "exists": {
            "ops": [
              {
                "key": "repository",
                "op": "Exists"
              }
            ]
          }
        },
        "delayInMs": 0,
        "doSync": true,
        "job": {
          "runnable": {
            "pathToExec": "/Users/kmgreen/Project/go/src/github.com/kmgreen2/agglo/bin/activitytracker",
            "cmdArgs": [
              "-commandType CreateCommit"
            ]
          }
        }
      }
    },
    {
      "transformer": {
        "name": "CircleCI",
        "specs": [
          {
            "sourceField": "username",
            "targetField": "submitter",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "exists": {
                  "ops": [
                    {
                      "key": "build_num",
                      "op": "Exists"
                    }
                  ]
                }
              }
            }
          },
          {
            "sourceField": "vcs_revision",
            "targetField": "digest",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "exists": {
                  "ops": [
                    {
                      "key": "build_num",
                      "op": "Exists"
                    }
                  ]
                }
              }
            }
          },
          {
            "sourceField": "job",
            "targetField": "eventType",
            "transformation": {
              "transformationType": "TransformCopy",
              "condition": {
                "exists": {
                  "ops": [
                    {
                      "key": "build_num",
                      "op": "Exists"
                    }
                  ]
                }
              }
            }
          }
        ]
      }
    },
    {
      "annotator": {
        "name": "JiraAnnotate",
        "annotations": [
          {
            "fieldKey": "integrationType",
            "value": "jira",
            "condition": {
              "expression": {
                "comparator": {
                  "lhs": {
                    "variable": {
                      "name": "webhookEvent"
                    }
                  },
                  "rhs": {
                    "literal": "jira:.*"
                  },
                  "op": "RegexMatch"
                }
              }
            }
          }
        ]
      }
    }
  ]
}
